---
# tasks file for virtualbox
- name: import rpm key
  rpm_key:
    state: present
    key: "{{ virtualbox_key }}"
  when:
    - ansible_pkg_mgr in ['yum', 'dnf', 'zypper']

- name: place yum repository
  yum_repository:
    name: virtualbox
    description: Fedora $releasever - $basearch - VirtualBox
    baseurl: "{{ virtualbox_yum_baseurl }}"
    gpgcheck: yes

- name: install requirements
  package:
    name: "{{ virtualbox_requirements }}"
    state: present

- name: install virtualbox
  package:
    name: VirtualBox-{{ virtualbox_version }}
  notify:
    - run vboxconfig
